@*@using Microsoft.Web.Helpers;*@

@{
    Layout = "_SULayout.cshtml";
    Page.Title = "MATHEMATICS AND COMPUTER SCIENCE INTERNSHIP APPLICATION";

    if (IsPost)
    {
        
        <!-- Connect to Database -->
        var db = Database.Open("MyConnectionString");

        <!-- Grab contents of the form -->
        var email = Request.Form["email"];
        var password = Request.Form["password"];

        var getInfo = db.QuerySingle("SELECT * FROM employeeinfo_all WHERE email=@0", email);
        if (getInfo == null)
        {
            Response.Write("none found");
        }
        else
        {
            if (@getInfo.password == password)
            {
                Session["firstname"] = @getInfo.firstname;
                Session["lastname"] = @getInfo.lastname;
                Session["email"] = @getInfo.email;
                Response.Redirect("Default");
            }
            else
            {
                Response.Write("email and passwords do not match");
            }
        }
    }

}

<!-- Form Validation -->
<script type="text/javascript" language="javascript">

    $(document).ready(function() {
        $("#login").validate({
        });
    });

</script>

<style>
    .error {
        color: #800000;
    }
    .hidden {
        display: none;
    }
</style>

<div>
    <form style="margin-left: 200px;" id="login" method="post" enctype="multipart/form-data">
        <h1>Math and Computer Science Login</h1>
        <div class="left">
            <label for="email">Email:</label>
            <input size="40" type="text" name="email" id="email" class="required" />
        </div>
        <div class="clear"></div>
        <div class="left">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" class="required" />
        </div>
        <div class="clear"></div>
        <p id="noemail" class="error hidden"><strong>No results found for the email you entered. Try Again.</strong></p>
        <p id="nomatch" class="error hidden"><strong>Email and Password do not match. Try Again.</strong></p>
        <input style="font-size: 20px;" class="input-button" type="submit" value="Login" />
    </form>

</div>
